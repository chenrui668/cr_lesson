{
  "ragUid": 19,
  "rags": [
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 1
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_3ab2f9cfb47e955d53a78e50a7636e34.jpeg&w=720&h=1192",
      "links": [],
      "w": 720,
      "h": 1192
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 2
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_39f31c9ecbcfd97a7aa610eeaad30292.jpeg&w=720&h=551",
      "links": [],
      "w": 720,
      "h": 551
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 3
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_244704e76087962dbf68bc391d300441.jpeg&w=720&h=763",
      "links": [],
      "w": 720,
      "h": 763
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 4
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_7e11644042c617669cb7717fc82a276f.jpeg&w=720&h=549",
      "links": [],
      "w": 720,
      "h": 549
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 5
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_8e740f087f2ab43e14f3807a13883b8d.jpeg&w=720&h=767",
      "links": [],
      "w": 720,
      "h": 767
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 6
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_730e4d8c6e2bd42af75295253a63e092.jpeg&w=720&h=552",
      "links": [],
      "w": 720,
      "h": 552
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 7
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_d6d591be8bfb25f2c1bc7676c787f2ba.jpeg&w=720&h=756",
      "links": [],
      "w": 720,
      "h": 756
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 8
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_045a0b75a478b0157d2ac4b82cc166a9.jpeg&w=720&h=555",
      "links": [],
      "w": 720,
      "h": 555
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 9
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_b7f7cb6756c718569f601a0d77070be0.jpeg&w=720&h=763",
      "links": [],
      "w": 720,
      "h": 763
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 10
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_adc6ac9dee8089f3ef422193cbbc46dc.jpeg&w=720&h=1587",
      "links": [],
      "w": 720,
      "h": 1587
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 11
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_fa261f9bf6d67b2f5d4bf946793fe87a.jpeg&w=720&h=423",
      "links": [],
      "w": 720,
      "h": 423
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 12
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_0a39c0d0e3cea978cede48de5e0e9ee1.jpeg&w=720&h=554",
      "links": [],
      "w": 720,
      "h": 554
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 15
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_7e125e5cc37bcb2e8ac0034244d97656.jpeg&w=716&h=679",
      "links": [],
      "w": 716,
      "h": 679,
      "editorTags": []
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 16
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_88b44e395fb1b74a0ab07452e4ed56de.jpeg&w=720&h=551",
      "links": [],
      "w": 720,
      "h": 551
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 17
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_329084d60823460fadc2722896b50cb6.jpeg&w=720&h=1219",
      "links": [],
      "w": 720,
      "h": 1219
    },
    {
      "editorName": "pic_link_full_default_empty",
      "editorGeneral": {
        "editorUid": 18
      },
      "src": "https://shop.io.mi-img.com/app/shop/img?id=shop_e452c83ff8bdcbc5f053ac10aafab823.jpeg&w=720&h=769",
      "links": [],
      "w": 720,
      "h": 769
    }
  ],
  "globalPropData": {
    "hide": false,
    "backToHome": false,
    "preventPullRefresh": false,
    "needLogin": false,
    "rnrenderOnly": false,
    "superLongPageOptimize": false,
    "style": {
      "max-width": "640px"
    },
    "showTopAd": false,
    "dateJump": {
      "href": "http://home.mi.com/shop/main"
    },
    "qrcode": true,
    "fixedToolbox": {
      "productList": false,
      "cart": false,
      "goBackTop": false
    },
    "lazyLoading": true,
    "removeWhiteLine": false
  },
  "meta": {
    "id": "5528",
    "title": "hey",
    "mode": "product",
    "traceName": "m1z3"
  },
  "articleProductGidList": [],
  "rn": "\"use strict\";function require(u){return allModuleMap[u]?allModuleMap[u]:void console.warn(\"(rn)Can't find module\",u)}var outputModulesMap={},outputActionsMap={},outputTagsMap={},outputLibsMap={},allModuleMap=rnParams;\"use strict\";!function(){var e={type:\"resource\"};!function(e,t){function r(){function e(){return(\"\"+Date.now()+Math.random()).replace(/0\\./,\"-\")}if(T.DeviceId)return T.DeviceId;if(\"web\"!==P.OS)return e();var t=void 0,r=\"mihome-trace-uid\";try{t=localStorage.getItem(r)}catch(e){t=\"unsupported\"}if(!t){t=e();try{localStorage.setItem(r,t)}catch(e){t=\"unsupported\"}}return t}function n(e,t,r){void 0===e&&(e=\"\");var n=new RegExp(\"[?&]\"+t+\"=([\\\\s\\\\S]+?)(&|$)\"),i=e.match(n);return i?i[1].trim():r}function i(e,t,r){var n=arguments.length<=3||void 0===arguments[3]?M:arguments[3],i=!(arguments.length<=4||void 0===arguments[4])&&arguments[4];return b.requestData(n,{showLogin:!i,body:e}).then(function(e){t&&t(e)}).catch(function(e){r&&r(e)})}function o(e){var t,r=e.data,n=e.success,i=e.error,o=e.url,a=e.skipLogin,s=void 0!==a&&a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(b.requestData(o,{showLogin:!s,body:r}));case 3:return t=e.sent,n&&n(t),e.abrupt(\"return\",t);case 8:throw e.prev=8,e.t0=e.catch(0),i&&i(e.t0),e.t0;case 12:case\"end\":return e.stop()}},null,this,[[0,8]])}function a(e){x.show(e)}function s(e){return e.match(/^[\\d.]*/)[0]/100}function c(e){return e.description&&e.description.match(/[\\u4e00-\\u9fa5]/)?e.description:e.message&&e.message.match(/[\\u4e00-\\u9fa5]/)?e.message:e.message||e.description||\"网络错误\"+e.code}function d(e,t){var r=u(e);return t/r.width*r.height}function u(e){var t=n(e,\"h\",0);t&&(t*=1);var r=n(e,\"w\",0);return r&&(r*=1),{height:t,width:r}}function p(e){if(null===e||\"object\"!=typeof e||\"isActiveClone\"in e)return e;var t=e.constructor();for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e.isActiveClone=null,t[r]=p(e[r]),delete e.isActiveClone);return t}function l(e,t,r){e=e.replace(new RegExp(\"[?&]\"+t+\"=[^&]*&?\",\"g\"),function(e){return\"&\"===e[e.length-1]?e[0]:\"\"});var n=/#[\\w-]+$/,i=e.match(n)||[];i=i[0]||\"\",e=e.replace(n,\"\");var o=\"&\";return e.indexOf(\"?\")===-1&&(o=\"?\"),\"\"+e+o+t+\"=\"+r+i}function f(){function e(e){var t=e.match(/MiHome/)&&e.match(/iOS/)||e.match(/^iOS-/)||e.match(/MIOTStore/)&&e.match(/;I/);t=Boolean(t);var r=e.match(/^Android-/)||e.match(/MIOTStore/)||e.match(/com\\.xiaomi\\.smarthome/);r=Boolean(r);var n=/Android/.test(e),i=/(iPad|iPhone|iPod)\\s+OS\\s([\\d_.]+)/.test(e),o=/MicroMessenger/i.test(e),a=o,s=/UCBrowser/.test(e),c=!n&&!i,d=r||t,u=d&&/YouPin/.test(e),p=d&&/SmartHome/.test(e),l=\"miniprogram\"===window.__wxjs_environment||/^wechatdevtools/.test(navigator.userAgent),f=/miui\\.hybrid/.test(e),h=l||f;return{rn:!1,iOS_app:t,android_app:r,app:d,android:n,iOS:i,weixin:o,wechat:a,uc:s,pc:c,youpin:u,mijia:p,wxminiprogram:l,miuinewapp:f,weirdhybrid:h}}var t={iOS_app:\"ios\"===P.OS,android_app:\"android\"===P.OS,app:\"web\"!==P.OS,android:\"ios\"===P.OS,iOS:\"android\"===P.OS,weixin:!1,wechat:!1,uc:!1,pc:!1,rn:!0,mijia:\"mijia\"===I,youpin:\"youpin\"===I,rnweb:\"web\"===P.OS};if(\"web\"===P.OS){var r=navigator.userAgent;Object.assign(t,e(r))}return t}function h(e,t){t&&t()}function g(e){var t={};return[\"background-color\",\"padding-top\",\"padding-bottom\",\"padding-left\",\"padding-right\",\"margin-top\",\"margin-bottom\",\"margin-left\",\"margin-right\",\"position\",\"left\",\"right\",\"bottom\",\"top\",\"width\",\"display\"].forEach(function(r,n){if(e[r]){var i=e[r];r=r.replace(/-\\w/,function(e){return e.toUpperCase().replace(/-/,\"\")}),i&&(i=i.replace(/px$/,\"\"),parseInt(i)==i&&(i=parseInt(i)),t[r]=i)}}),t}function m(e,t){for(var r=!0;r;){var n=e,i=t;r=!1;{if(Array.isArray(n))return n.forEach(function(e){i(e),e.rags&&m(e.rags,i)}),n;e=[n],t=void 0,r=!0}}}function v(e){var t=1e4;m(e,function(e){return t++,e.editorGeneral||(e.editorGeneral={editorUid:t,style:{}}),e.editorGeneral.style||(e.editorGeneral.style={}),e.editorGeneral.editorUid||(e.editorGeneral.editorUid=t),e.editorGeneral.style=g(e.editorGeneral.style),e.editorActions||(e.editorActions={}),e.editorTags||(e.editorTags=[]),e.editorName||(e.editorName=e.editorConfig.name),delete e.editorConfig,e.style&&(e.style=g(e.style)),e})}function w(e){e.globalPropData.style=g(e.globalPropData.style),v(e.rags)}function y(e,t){e=e.split(\".\");var r=parseInt(e[0]),n=void 0;n=e[1]?2===e[1].length?e[1]/1:10*e[1]:0;var i=void 0;\"yuan\"===t?i=100*r+n:\"cent\"===t?i=r:console.error(\"formatMoney's unit can only be yuan or cent\");var o=\"\"+parseInt(i/100),a=i%100;return a=a<10?\"0\"+a:\"\"+a,{int:o,dot:a}}function O(){var e=arguments.length<=0||void 0===arguments[0]?\"0\":arguments[0],t=arguments.length<=1||void 0===arguments[1]?\"cent\":arguments[1],r=arguments.length<=2||void 0===arguments[2]?\"￥\":arguments[2];e+=\"\";var n={},i=y(e,t);return n.dot=i.dot,n.int=i.int,n.raw=e,n.fix=\"\"+r+n.int+\".\"+n.dot,\"00\"!==n.dot?n.short=n.int+\".\"+n.dot.replace(/0$/,\"\"):n.short=n.int,n}function S(e,t){return new RegExp('\"editorUid\":'+t+\"\\\\b\").test(JSON.stringify(e))}for(var b=e(\"request\"),x=e(\"ToastUtil\"),P=e(\"Platform\"),U=e(\"buildConfig\"),I=U.Channel,T=e(\"CommonBridge\"),C=\"web\"===P.OS?location.origin:\"https://shopapi.io.mi.com\",M=C+\"/app/shop/pipe\",A=C+\"/app/shopv3/pipe\",R=C+\"/app/shop/jpipe\",_=C+\"/app/shop/counter\",G=f(),j={TitleBarColor:\"#333333\",fsTitle:15,fsText:13,fsGroup:14,fsDesc:13,fsTag:10,fsButton:14,fsBar:15,fsBarText:12,fsMenuTitle:14,fsMenuText:13},E=0;E<39;E++)j[\"font\"+E]=E;if(\"ios\"===P.OS)for(var E in j)\"number\"==typeof j[E]&&j[E]++;t.exports={getTraceUid:r,getParam:n,percent2float:s,getSizeFromUrl:u,clone:p,addParam:l,toast:a,miFetch:i,miFetch2:o,PIPE_URL:M,GPIPE_URL:A,JPIPE_URL:R,COUNTER_URL:_,ua:G,preloadImage:h,handleRags:v,handleArticle:w,eachRag:m,Theme:j,formatMoney:O,getChineseMessage:c,ragContainsUid:S,getHeightFromUrlWidth:d}}(require,e),e.exports&&(allModuleMap[\"/rn/util.js\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if(\"value\"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return;e=l,t=i,r=s,n=!0,a=l=void 0}};!function(){var e={type:\"resource\"};!function(e,t){var r=e(\"react-native\"),n=r.Image,o=(r.View,r.StyleSheet),i=(r.Platform,e(\"react\")),s=i.Component,a=i.PropTypes,u=e(\"react\"),l=e(\"/rn/util.js\"),c=l.getParam,p=e(\"RnRender\"),h=function(e){function t(e){var r=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e),this.setNativeProps=function(e){r._root.setNativeProps(e)},this.state={style:{},props:Object.assign({},e)},this.state.props.winWidth=360}return _inherits(t,e),_createClass(t,null,[{key:\"propTypes\",value:{source:a.object.isRequired,style:a.any,width:a.oneOfType([a.number,a.string]),height:a.oneOfType([a.number,a.string]),loadingSize:a.object,lazy:a.bool,component:a.object},enumerable:!0},{key:\"defaultProps\",value:{style:{},loadingSize:{w:0,h:0},lazy:!0},enumerable:!0}]),_createClass(t,[{key:\"componentWillMount\",value:function(){var e=this;this.handleProps(this.props,function(t){Object.keys(t).length&&e.setState({style:Object.assign({},e.state.style,t)})})}},{key:\"componentWillReceiveProps\",value:function(e){this.setStyle(e),this.setState({props:Object.assign({},e)})}},{key:\"setStyle\",value:function(e){var t=this;this.handleProps(e,function(e){Object.keys(e).length&&t.setState({style:Object.assign({},t.state.style,e)})})}},{key:\"handleProps\",value:function(e,t){function r(t,r){var n={},i=o.flatten(e.style)||{},s=e.height||i.height,a=e.width||i.width;return s&&a?(n.height=s,n.width=a):t&&r&&(a&&!s?(n.height=a/t*r,n.width=a):s&&!a&&(n.width=s/r*t,n.height=s)),n=o.flatten([i,n]),n.height*=1,n.width*=1,n}var i={};if(e.style&&(i=o.flatten(e.style)),e.source&&\"object\"==typeof e.source&&e.source.uri){var s=c(e.source.uri,\"w\"),a=c(e.source.uri,\"h\");s&&a||i.width&&i.height?t(r(s,a)):n.getSize(e.source.uri,function(e,n){t(r(e,n))},function(e){console.log(e)})}t({})}},{key:\"getHeight\",value:function(){return this.state.style.height}},{key:\"render\",value:function(){var e=this,t=this.state.props.source;if(t.uri&&t.uri.startsWith(\"//\")&&(t.uri=\"https:\"+t.uri),!t.uri)return null;var r=n;return this.props.component&&(r=this.props.component),u.createElement(r,_extends({host:\"rnrender-stream-view\"+p.props.uri,ref:function(t){return e._root=t}},this.state.props,{style:this.state.style}))}}]),t}(s);t.exports=h}(require,e),e.exports&&(allModuleMap[\"/rn/CommonImage.jsx\"]=e.exports)}();\"use strict\";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_get=function(t,e,n){for(var o=!0;o;){var r=t,i=e,s=n;o=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,i);if(void 0!==a){if(\"value\"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=i,n=s,o=!0,a=u=void 0}};!function(){var t={type:\"resource\"};!function(t,e){function n(t,e){u={},l=[];var n=function(t){return e[t]?void e[t].js(function(e){u[t]=e},function(t){l.push(t)}):\"continue\"};for(var o in t){n(o)}}function o(){l.forEach(function(t){t()})}function r(t,e){return function(t){function n(t){_classCallCheck(this,n),_get(Object.getPrototypeOf(n.prototype),\"constructor\",this).call(this,t),this.action={},this.onPressList=[],this.state=Object.assign({},this.state),this.navigator=t.navigator,this.instance=t.instance}return _inherits(n,t),_createClass(n,[{key:\"componentWillMount\",value:function(){var t=this;_get(Object.getPrototypeOf(n.prototype),\"componentWillMount\",this)&&_get(Object.getPrototypeOf(n.prototype),\"componentWillMount\",this).call(this);var o=function(e){t.onPressList.push(e)},r=function(e){t.props.setImage&&t.props.setImage(e),t.setState({src:e})},i=function(e){t.setState({innerSrc:e})},s=function(t,n){e.tools.jumpTo(t,n)},a={onPress:o,setImage:r,setInnerImage:i,jump:s,rag:this,eventEmitter:e.eventEmitter,countEvent:e.tools.countEvent};for(var c in this.props.action){var l=this.props.action[c].data,p=this.props.action[c].name;u[p]&&u[p](l,a,this.navigator,this.instance)}}},{key:\"isClickable\",value:function(){return Boolean(this.onPressList.length)}},{key:\"actionRender\",value:function(){var t=this.state.innerSrc;return t&&a.createElement(c,{style:[p.innerImage,{height:this.props.height,width:this.props.width}],source:{uri:t}})||null}},{key:\"onPress\",value:function(){_get(Object.getPrototypeOf(n.prototype),\"onPress\",this)&&_get(Object.getPrototypeOf(n.prototype),\"onPress\",this).call(this),this.props.onPress&&this.props.onPress(),this.onPressList.forEach(function(t){t()})}}]),n}(t)}var i=t(\"react-native\"),s=i.StyleSheet,a=t(\"react\"),c=(t(\"RnRender\"),t(\"/rn/CommonImage.jsx\")),u=void 0,l=void 0,p=null;p=s.create({innerImage:{resizeMode:\"contain\"}}),e.exports={bindAction:r,init:n,didMount:o}}(require,t),t.exports&&(allModuleMap[\"/rn/allAction.js\"]=t.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function(e,t,r){for(var o=!0;o;){var n=e,i=t,s=r;o=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,i);if(void 0!==a){if(\"value\"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(s)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,r=s,o=!0,a=u=void 0}};!function(){var e={type:\"resource\"};!function(e,t){var r=e(\"react\"),o=r.Component,n=r.PropTypes,i=e(\"react\"),s=e(\"react-native\"),a=s.View,c=s.TouchableWithoutFeedback,u=e(\"/rn/allAction.js\"),l=u.bindAction,p=e(\"RnRender\"),f=e(\"/rn/CommonImage.jsx\"),h=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:\"onPress\",value:function(){this.props.href&&p.tools.jumpTo({url:this.props.href,replace:!1,rag:this}),_get(Object.getPrototypeOf(t.prototype),\"onPress\",this)&&_get(Object.getPrototypeOf(t.prototype),\"onPress\",this).call(this)}},{key:\"getInner\",value:function(){return i.createElement(a,{style:[this.props.style]},this.actionRender(),this.props.tag&&i.createElement(f,{source:{uri:this.props.tag.image},height:\"100%\",width:\"100%\",resizeMode:\"contain\"}))}},{key:\"render\",value:function(){var e=this;return this.isClickable()||Boolean(this.props.href)?i.createElement(c,{onPress:function(){return e.onPress()}},this.getInner()):this.getInner()}}],[{key:\"propTypes\",value:{style:n.object.isRequired,href:n.string,tag:n.object},enumerable:!0}]),t}(o);t.exports=l(h,p)}(require,e),e.exports&&(allModuleMap[\"/rn/ImgLink.jsx\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var s=e,i=t,o=r;n=!1,null===s&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,i);if(void 0!==a){if(\"value\"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=i,r=o,n=!0,a=u=void 0}};!function(){var e={type:\"resource\"};!function(e,t){var r=e(\"RnRender\"),n=e(\"/rn/util.js\"),s=n.getSizeFromUrl,i=n.getParam,o=(n.percent2float,e(\"react-native\")),a=o.TouchableOpacity,l=e(\"react\"),u=l.Component,p=l.PropTypes,h=e(\"react\"),c=e(\"react-native\"),f=e(\"/rn/CommonImage.jsx\"),y=e(\"/rn/ImgLink.jsx\"),g=c.View,v=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e),this.state={src:e.src,lazy:!0},this.tags=[]}return _inherits(t,e),_createClass(t,null,[{key:\"propTypes\",value:{links:p.array,editorTags:p.array,src:p.string,baseWidth:p.number,href:p.string,lazy:p.bool,width:p.number,height:p.number,rag:p.object,onPress:p.func,square:p.bool},enumerable:!0},{key:\"defaultProps\",value:{src:\"\",lazy:!0},enumerable:!0}]),_createClass(t,[{key:\"componentWillMount\",value:function(){this.handleProps(this.props)}},{key:\"componentWillReceiveProps\",value:function(e){this.handleProps(e)}},{key:\"onPress\",value:function(){this.props.href?r.tools.jumpTo({url:this.props.href,rag:this.props.rag||this}):this.props.onPress&&this.props.onPress()}},{key:\"renderLinks\",value:function(){var e=this;if(this.props.links&&this.props.links.length)return this.props.links.map(function(t,r){var n={position:\"absolute\"};n.top=t.top+\"%\",n.left=t.left+\"%\",n.right=t.right+\"%\",n.bottom=t.bottom+\"%\";var i=s(e.props.src),o=i.width,a=i.height;return h.createElement(y,_extends({style:n,key:r,height:e.props.baseWidth/o*a*(100-t.top-t.bottom)/100,width:e.props.baseWidth*(100-t.left-t.right)/100,setImage:function(t){return e.setImage(t)}},t))})}},{key:\"renderTags\",value:function(){function e(e,t){var n=this,s={position:\"absolute\"},i=[\"top\",\"right\",\"bottom\",\"left\"];i.forEach(function(t){var r=e[t];if(\"undefined\"!=typeof r){if(\"number\"==typeof r)return void(s[t]=r+\"%\");r+=\"\",r=r.replace(/px$/,\"\"),r=r.trim(),s[t]=r}});var o=r.TagMap[e.tag.name];return o?h.createElement(g,{style:s,key:t},h.createElement(o,_extends({},e.tag.data,{ref:function(e){n.tags[t]=e},\"tag-name\":e.tag.name}))):null}return this.props.editorTags&&this.props.editorTags.length?this.props.editorTags.map(e,this):null}},{key:\"setImage\",value:function(e){this.setState({src:e})}},{key:\"getInner\",value:function(){var e=this;return this.props.square?h.createElement(g,{style:{position:\"relative\",width:this.state.style.width,height:this.state.style.width,flexDirection:\"column\",overflow:\"hidden\",justifyContent:\"center\"}},h.createElement(f,{ref:function(t){return e.innerRef=t},key:this.props.src,style:[this.state.style,{flexShrink:0}],source:{uri:this.props.src},lazy:this.props.lazy}),this.renderLinks(),this.renderTags()):h.createElement(g,{style:{position:\"relative\"}},h.createElement(f,{ref:function(t){return e.innerRef=t},key:this.props.src,style:this.state.style,source:{uri:this.props.src},lazy:this.props.lazy}),this.renderLinks(),this.renderTags())}},{key:\"handleProps\",value:function(e){e.baseWidth?this.setState({style:{width:e.baseWidth}}):this.props.width?this.setState({style:{width:this.props.width}}):this.props.height?this.setState({style:{height:this.props.height}}):this.setState({style:e.style})}},{key:\"isClickable\",value:function(){return Boolean(this.props.href)}},{key:\"getItemLayout\",value:function(e,t){return{length:this.innerRef.getHeight(),offset:0,index:t}}},{key:\"render\",value:function(){var e=this;return this.isClickable()?h.createElement(a,{onPress:function(){return e.onPress()},activeOpacity:.8},this.getInner()):this.getInner()}}],[{key:\"getHeight\",value:function(e,t){return t/i(e.src,\"w\")*i(e.src,\"h\")}}]),t}(u);t.exports=v}(require,e),e.exports&&(allModuleMap[\"/rn/CommonImageMap.jsx\"]=e.exports)}();\"use strict\";!function(){var e={type:\"resource\"};!function(e,l){var r=e(\"/rn/CommonImageMap.jsx\");l.exports=r}(require,e),e.exports&&(allModuleMap[\"/cloud/module/pic_link_full_default_empty/pic_link_full_default_empty.rn.jsx\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function(e,t,r){for(var o=!0;o;){var n=e,i=t,a=r;o=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if(\"value\"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,r=a,o=!0,s=u=void 0}};!function(){var e={type:\"resource\"};!function(e,t){var r=e(\"react-native\"),o=r.View,n=r.TouchableWithoutFeedback,i=r.findNodeHandle,a=e(\"react\"),s=a.Component,l=a.PropTypes,u=e(\"react\"),c=e(\"/rn/util.js\"),h=c.clone,p=c.percent2float,d=e(\"RnRender\"),f=e(\"/rn/allAction.js\"),g=f.bindAction,v=e(\"StyleSheet\"),y=function(e){function t(e){var r=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e);var o=[\"onPress\"];o.forEach(function(e){r[e]=r[e].bind(r)}),this.state=this.handleProps(e)}return _inherits(t,e),_createClass(t,null,[{key:\"propTypes\",value:{action:l.object.isRequired,general:l.object.isRequired,hide:l.bool,ModuleMap:l.object.isRequired,rag:l.object.isRequired,ragParams:l.object,baseWidth:l.number,inStream:l.bool,onPress:l.func},enumerable:!0},{key:\"defaultProps\",value:{ragParams:{},action:{}},enumerable:!0}]),_createClass(t,[{key:\"getItemLayout\",value:function(e,t){if(!this.ragRef.getItemLayout)return console.log(this.props.rag.editorName+\" doesn't have getItemLayout\"),console.warn(this.props.rag.editorName+\" doesn't have getItemLayout\"),{length:100,offset:0,index:t};var r=this.ragRef.getItemLayout(e,t);return r.length+=this.props.general.paddingTop||0,r.length+=this.props.general.paddingBottom||0,r.length+=this.props.general.marginTop||0,r.length+=this.props.general.marginBottom||0,r}},{key:\"componentDidMount\",value:function(){var e=this,t=this;for(var r in this.props.action)switch(r){case\"header\":case\"footer\":var o=function(){if(!e.props.inStream)return\"break\";var r=0,o=e.props.general.editorUid;e.onScroll=function(n){e.view.measureLayout(i(d.wrap),function(e,i){t.y=i,\"undefined\"==typeof n&&(n=r),r=n;var a=d.floatingRags[o];return a?void(n<t.y&&0!==t.y?a.state.hide||a.hide():a.state.hide&&a.show()):void console.log(\"no peer\")})};var n=null,a=function(){var t=d.floatingRags[o];t&&(clearInterval(n),e.onScroll(r))};return n=setInterval(a,100),a(),d.tools.registerScrollListener(e.onScroll),\"break\"}();if(\"break\"===o)break}}},{key:\"componentWillReceiveProps\",value:function(e){this.setState(this.handleProps(e))}},{key:\"measure\",value:function(e){try{this.view.measureLayout(i(d.wrap),e.bind(this))}catch(e){console.log(e.message)}}},{key:\"handleProps\",value:function(e){var t=e.general,r=h(t.style),o=this.props.baseWidth||t.baseWidth;r.width&&\"string\"==typeof r.width&&r.width.match(/%$/)?r.width=p(r.width)*o:r.width=o,r.marginLeft&&(r.width-=r.marginLeft),r.marginRight&&(r.width-=r.marginRight),r.marginBottom||(r.marginBottom=-v.hairlineWidth);var n=!1;return\"none\"===r.display&&(n=!0),delete r.display,this.y=0,{hasAction:Boolean(Object.keys(e.action).length),style:r,hide:n||!this.props.inStream,baseWidth:r.width-(r.paddingLeft||0)-(r.paddingRight||0)}}},{key:\"hide\",value:function(){this.setState({hide:!0})}},{key:\"show\",value:function(){this.setState({hide:!1})}},{key:\"render\",value:function(){var e=this,t={};(this.state.hide||this.props.hide)&&(t={position:\"absolute\",left:-1e5});var r=Object.assign({onPress:this.onPress,baseWidth:this.state.baseWidth,lazy:this.props.inStream,ref:function(t){return e.ragRef=t},ModuleMap:this.props.ModuleMap,prefetchResult:d.prefetchResult[this.props.rag.editorGeneral.editorUid]},this.props.rag,this.props.ragParams),i=this.props.ModuleMap[this.props.rag.editorName],a=u.createElement(o,{ref:function(t){e.view=t},style:[this.state.style,t]},u.createElement(i,r));return u.createElement(n,{onPress:this.onPress,ref:function(t){return e.touchable=t}},a)}}]),t}(s);t.exports=g(y,d)}(require,e),e.exports&&(allModuleMap[\"/rn/RagWrap.jsx\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),_get=function(e,t,i){for(var s=!0;s;){var o=e,n=t,r=i;s=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(void 0!==l){if(\"value\"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(r)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=n,i=r,s=!0,l=u=void 0}};!function(){var e={type:\"resource\"};!function(e,t){var i=e(\"react\"),s=i.Component,o=e(\"react\"),n=e(\"react-native\"),r=n.View,l=n.TouchableWithoutFeedback,a=n.Text,u=n.TouchableHighlight,c=n.Image,p=e(\"react-native\"),h=p.Modal,f=e(\"/rn/util.js\"),d=f.ua,y=f.Theme,b=e(\"CommonStyles\"),m={uri:\"https://shop.io.mi-img.com/app/shop/img?id=shop_3f8679212c0f384920491dc4f05b173d.png&w=52&h=52\"};d.rn||(h=function(e){function t(){_classCallCheck(this,t);for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).apply(this,i)}return _inherits(t,e),_createClass(t,[{key:\"render\",value:function(){return this.props.visible?o.createElement(r,{style:{position:\"absolute\",left:0,right:0,bottom:0,top:0}},this.props.children):null}}]),t}(s)),t.exports=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e),this.state={modalVisible:this.props.visible}}return _inherits(t,e),_createClass(t,[{key:\"componentWillMount\",value:function(){}},{key:\"componentWillReceiveProps\",value:function(e){e.visible!=this.state.modalVisible&&this.setState({modalVisible:e.visible})}},{key:\"show\",value:function(){this.state.modalVisible||this.setState({modalVisible:!0})}},{key:\"hide\",value:function(){this.state.modalVisible&&(this.setState({modalVisible:!1}),this.props.onHideModal&&this.props.onHideModal())}},{key:\"isShowing\",value:function(){return this.state.modalVisible}},{key:\"setModalVisible\",value:function(e){e?this.show():this.hide()}},{key:\"renderTitle\",value:function(){if(this.props.renderTitle)return this.props.renderTitle(this.props.showCloseButton);var e=null;this.props.showCloseButton&&(e=o.createElement(r,{style:[{width:17.67,height:17.67},this.props.closeButtonStyle]},o.createElement(u,{onPress:this.hide.bind(this)},o.createElement(c,{source:m,style:{width:17.67,height:17.67}}))));var t=null;return t=this.props.titleText&&\"\"!=this.props.titleText?o.createElement(r,{style:{flex:1,alignItems:\"center\",justifyContent:\"center\"}},o.createElement(a,{style:{fontSize:y.font14,color:b.black_90_transparent}},this.props.titleText)):o.createElement(r,{style:{flex:1,alignItems:\"center\",justifyContent:\"center\"}}),o.createElement(r,{style:[{flexDirection:\"row\",justifyContent:\"center\"},this.props.titleStyle]},t,e)}},{key:\"render\",value:function(){var e=this,t=b.ViewHeight;return o.createElement(h,{animatedType:this.props.animatedType,transparent:!0,visible:this.state.modalVisible,onRequestClose:function(){e.hide()}},o.createElement(l,{onPress:this.onOutsidePress.bind(this),style:{backgroundColor:\"rgba(0, 0, 0, 0)\"}},o.createElement(r,{style:[{height:t,backgroundColor:\"rgba(0,0,0,0.5)\",justifyContent:\"flex-end\"},this.props.maskStyle]},o.createElement(l,{onPress:function(){}},o.createElement(r,{style:[{backgroundColor:\"white\"},this.props.contentStyle]},this.renderTitle(),this.props.renderContent())))))}},{key:\"onOutsidePress\",value:function(){this.props.enableOutsideDismiss&&this.hide(),this.props.onPressOutside&&this.props.onPressOutside()}}],[{key:\"defaultProps\",value:{visible:!1,onPressOutside:void 0,enableOutsideDismiss:!0,showCloseButton:!1,titleText:\"\",maskStyle:void 0,contentStyle:void 0,animated:!1},enumerable:!0}]),t}(s)}(require,e),e.exports&&(allModuleMap[\"/rn/PopModal.jsx\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var o=e,s=t,l=r;n=!1,null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,s);if(void 0!==i){if(\"value\"in i)return i.value;var a=i.get;if(void 0===a)return;return a.call(l)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=s,r=l,n=!0,i=u=void 0}};!function(){var e={type:\"resource\"};!function(e,t){var r=e(\"react\"),n=r.Component,o=e(\"react\"),s=e(\"react-native\"),l=s.Text,i=s.View,a=s.PixelRatio,u=s.TouchableHighlight,c=e(\"/rn/util.js\").Theme,p=e(\"CommonStyles\"),h=o.PropTypes;t.exports=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e),this.state={disabled:!1}}return _inherits(t,e),_createClass(t,[{key:\"onPressLeftBtn\",value:function(){this.props.onPress&&this.props.onPress(0)}},{key:\"onPressRightBtn\",value:function(){this.props.onPress&&this.props.onPress(1)}},{key:\"renderButton\",value:function(e){return o.createElement(i,{style:[{flex:1,alignItems:\"center\",justifyContent:\"center\",height:40},this.props.buttonStyle]},o.createElement(l,{style:[{fontSize:c.font13,color:p.black_70_transparent},this.props.textStyle]},e))}},{key:\"render\",value:function(){return this.props.disabled?o.createElement(i,{style:[{flexDirection:\"row\"},this.props.borderStyle]},this.renderButton(this.props.leftText),o.createElement(i,{style:{width:1/a.get(),height:39,backgroundColor:p.black_50_transparent}}),this.renderButton(this.props.rightText)):o.createElement(i,{style:[{flexDirection:\"row\"},this.props.borderStyle]},o.createElement(u,{style:{flex:1},underlayColor:p.touchHighlightBackground,onPress:this.onPressLeftBtn.bind(this)},this.renderButton(this.props.leftText)),o.createElement(i,{style:{width:1/a.get(),height:39,backgroundColor:p.black_50_transparent}}),o.createElement(u,{style:{flex:1},underlayColor:p.touchHighlightBackground,onPress:this.onPressRightBtn.bind(this)},this.renderButton(this.props.rightText)))}}],[{key:\"propTypes\",value:{borderStyle:h.oneOfType([h.object,h.array]),textStyle:h.object,leftText:h.string,rightText:h.string,onPress:h.func,enable:h.bool,disabled:h.bool,buttonStyle:h.object},enumerable:!0},{key:\"defaultProps\",value:{borderStyle:null,enable:!0,onPress:null,leftText:\"取消\",rightText:\"确定\"},enumerable:!0}]),t}(n)}(require,e),e.exports&&(allModuleMap[\"/rn/DoubleButton.jsx\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var o=e,i=t,l=r;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if(\"value\"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(l)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,r=l,n=!0,a=c=void 0}};!function(){var e={type:\"resource\"};!function(e,t){var r=e(\"react\"),n=r.PropTypes,o=r.Component,i=(r.PureComponent,e(\"/rn/PopModal.jsx\")),l=e(\"/rn/util.js\"),a=(l.GPIPE_URL,l.getChineseMessage,l.Theme,e(\"request\"),e(\"react-native\")),s=(a.Platform,a.StyleSheet,a.View),c=a.Text,u=(a.ScrollView,a.TouchableWithoutFeedback,a.TouchableOpacity,a.TouchableHighlight),d=a.PixelRatio,p=(a.TextInput,e(\"CommonStyles\")),f=(e(\"/rn/DoubleButton.jsx\"),e(\"react\")),y=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e),this.state={}}return _inherits(t,e),_createClass(t,[{key:\"componentDidMount\",value:function(){}},{key:\"componentWillMount\",value:function(){}},{key:\"onPress\",value:function(e){console.log(\"result\",e)}},{key:\"renderModal\",value:function(){return f.createElement(s,{style:{alignItems:\"center\",width:p.ViewWidth-40,paddingTop:52,position:\"relative\"}},f.createElement(c,{style:{color:\"#363636\"}},this.props.content),f.createElement(s,{style:{width:p.ViewWidth-40,height:1/d.get(),backgroundColor:\"#E2E2E2\",marginTop:52}}),f.createElement(s,{style:{height:50,flexDirection:\"row\",backgroundColor:\"#fafafa\",borderRadius:5}},f.createElement(u,{onPress:this.props.onPress.bind(void 0,!1),underlayColor:\"#ddd\",style:{flex:1,justifyContent:\"center\",alignItems:\"center\",borderRightColor:\"#E2E2E2\",borderBottomLeftRadius:5}},f.createElement(s,null,f.createElement(c,{style:{color:\"#020202\"}},\"取消\"))),f.createElement(s,{style:{width:1/d.get(),height:\"100%\",backgroundColor:\"#E2E2E2\"}}),f.createElement(u,{onPress:this.props.onPress.bind(void 0,!0),underlayColor:\"#ddd\",style:{flex:1,justifyContent:\"center\",alignItems:\"center\",borderRightColor:\"#E2E2E2\",borderBottomRightRadius:5}},f.createElement(s,null,f.createElement(c,{style:{color:\"#866c58\"}},\"确定\")))))}},{key:\"render\",value:function(){var e=this;return f.createElement(i,{onPressOutside:this.props.onPress.bind(void 0,!1),renderContent:this.renderModal.bind(this),ref:function(t){return e.modalRef=t},maskStyle:{justifyContent:\"center\",paddingLeft:20,paddingRight:20,alignItems:\"center\"},contentStyle:{borderRadius:5},visible:!0})}}],[{key:\"propTypes\",value:{content:n.string,onPress:n.func},enumerable:!0}]),t}(o);t.exports=y}(require,e),e.exports&&(allModuleMap[\"/rn/ConfirmModal.js\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e={type:\"resource\"};!function(e,t){t.exports=function(){function e(){_classCallCheck(this,e),this._callbacks={}}return _createClass(e,[{key:\"on\",value:function(e,t){return this._callbacks[\"$\"+e]=this.listeners(e),this._callbacks[\"$\"+e].push(t),this}},{key:\"once\",value:function(e,t){function n(){this.off(e,n);for(var r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];t.apply(this,s)}return n.fn=t,this.on(e,n),this}},{key:\"off\",value:function(e,t){if(0===arguments.length)return this._callbacks={},this;var n=this.listeners(e);if(!n.length)return this;if(1===arguments.length)return delete this._callbacks[\"$\"+e],this;for(var r=void 0,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return this}},{key:\"emit\",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return this.listeners(e).forEach(function(e){e.apply(t,r)}),this}},{key:\"listeners\",value:function(e){return this._callbacks[\"$\"+e]||[]}},{key:\"hasListeners\",value:function(e){return!!this.listeners(e).length}}]),e}()}(require,e),e.exports&&(allModuleMap[\"/rn/EventEmitter.js\"]=e.exports)}();\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _slicedToArray=function(){function e(e,t){var r=[],o=!0,i=!1,n=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){i=!0,n=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function(e,t,r){for(var o=!0;o;){var i=e,n=t,a=r;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,n);if(void 0!==s){if(\"value\"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=n,r=a,o=!0,s=c=void 0}};!function(){var e={type:\"resource\"};!function(e,t){function r(e,t){function r(e){if(e&&\"object\"==typeof e)for(var t in e)L[t]||H.indexOf(t)!==-1||(o=!1,console.warn(Object.keys(L)),console.warn(\"Unsupported action\",t),console.log(\"Unsupported action\",t))}var o=!0;return C(e.rags,function(e){t[e.editorName]||(o=!1,console.warn(\"Unsupported rag\",e.editorName),console.log(\"Unsupported rag\",e.editorName)),e.links&&Array.isArray(e.links)&&e.links.length&&e.links.forEach(function(e){r(e.action),e.editorTags&&(console.warn(\"tags is not supported yet\"),console.log(\"tags is not supported yet\"),o=!1)}),r(e.editorActions)}),o}var o=e(\"react-native\"),i=o.StyleSheet,n=o.View,a=(o.findNodeHandle,o.ScrollView),s=o.FlatList,l=o.Platform,c=o.TouchableWithoutFeedback,p=o.TouchableOpacity,h=e(\"StoreBack\"),u=e(\"react\"),d=u.PropTypes,f=u.Component,g=e(\"react\"),v=e(\"ShareView\"),m=e(\"CommonStyles\"),y=e(\"Uri\"),b=e(\"MiotStat\"),w=e(\"WebViewNavBar\"),R=e(\"CommonBridge\"),k=e(\"MenuView\"),S=e(\"/rn/allAction.js\"),P=(e(\"request\"),e(\"articleUri\")),M=e(\"/rn/ConfirmModal.js\"),U=e(\"/rn/util.js\"),x=U.clone,T=U.addParam,C=U.eachRag,E=U.getParam,V=(U.COUNTER_URL,U.toast),B=U.ua,O=U.ragContainsUid,_=U.getTraceUid,j=e(\"RnRender\"),D=e(\"/rn/EventEmitter.js\"),F=e(\"BasePage\"),I=e(\"/rn/CommonImage.jsx\"),G=e(\"/rn/PopModal.jsx\"),W=e(\"NativeModules\"),A=(W.ShareAndroid,null),L={footer:1,header:1},H=[\"footer\",\"header\"],N=\"FlatList\";\"web\"!==l.OS&&s||(N=\"ScrollView\");var q=void 0,X=function(e){function t(e){var r=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e),this._renderItem=function(e){var t=e.item;e.index;t.editorGeneral.baseWidth=r.props.baseWidth;var o=r.props.ModuleMap[t.editorName];if(o){var i=function(e){var o=t.editorGeneral[\"attr-id\"];o&&(r.props.ragMap[o]=e)},n=g.createElement(q,{ModuleMap:r.props.ModuleMap,rag:t,general:t.editorGeneral,action:t.editorActions,key:t.editorGeneral.editorUid,id:t.editorGeneral.editorUid,ref:i,inStream:!0});return n}return null},this.onScroll=function(e){r.props.onScroll&&r.props.onScroll(e)},this.onRef=function(e){r.listRef=e,r.props.ref2&&r.props.ref2(e)},this.getItemLayout=function(e,t){for(var o=e[t],i=r.getRagHeight(o),n=0,a=0;a<t;a++)n+=r.getRagHeight(e[a]);return{length:i,offset:n,index:t}},this.state={refreshing:!1},this.onRefresh=this.onRefresh.bind(this),this.refList=[],this.ragIDMap={},this.heightList=[],this.props.RnRender&&this.props.RnRender.eventEmitter.on(\"go-back-top\",function(){r.goBackTop()})}return _inherits(t,e),_createClass(t,null,[{key:\"propTypes\",value:{canRefresh:d.bool,rags:d.array,ModuleMap:d.object,globalPropData:d.object,baseWidth:d.number,ragMap:d.object,preventStreamViewRender:d.bool,height:d.number,onScroll:d.func,ref2:d.func,onRefresh:d.func,RnRender:d.object,removeClippedSubviews:d.bool},enumerable:!0}]),_createClass(t,[{key:\"goBackTop\",value:function(){\"FlatList\"===N?this.listRef.scrollToOffset({x:0,y:0,animated:!0}):this.listRef.scrollTo({y:0})}},{key:\"shouldComponentUpdate\",value:function(e){return!e.preventStreamViewRender}},{key:\"onRefresh\",value:function(){this.props.onRefresh&&this.props.onRefresh(),this.setState({refreshing:!0})}},{key:\"scrollViewRender\",value:function(){var e=this;return g.createElement(a,{ref:this.onRef,onScroll:this.onScroll,style:[{height:this.props.height},{flexDirection:\"column\",flex:1},this.props.globalPropData.style]},this.props.rags.map(function(t){return e._renderItem({item:t})}))}},{key:\"getRagHeight\",value:function(e){var t=this.props.ModuleMap[e.editorName];return t||console.log(\"rag not found\",e),t.getHeight?t.getHeight(e,this.props.baseWidth):10}},{key:\"scrollTo\",value:function(e){try{var t=this.ragIDMap[e];if(!t)return console.warn(\"can't find id \"+e),void console.log(\"can't find id \"+e);for(var r=0,o=0;o<t.index;o++)r+=this.getRagHeight(this.props.rags[o]);\"FlatList\"===N?this.listRef.scrollToIndex({index:t.index}):this.listRef.scrollTo({y:r})}catch(e){console.log(e.message)}}},{key:\"render\",value:function(){var e=this;if(this.props.rags.forEach(function(t,r){var o=t.editorGeneral[\"attr-id\"];o&&(e.ragIDMap[o]={rag:t,index:r})}),\"ScrollView\"===N)return this.scrollViewRender();var t=void 0;return this.props.canRefresh&&(t=this.onRefresh),g.createElement(s,{removeClippedSubviews:this.props.removeClippedSubviews,initialNumToRender:3,ref:this.onRef,onScroll:this.onScroll,legacyImplementation:!0,refreshing:this.state.refreshing,onRefresh:t,renderItem:this._renderItem,data:this.props.rags,style:[{height:this.props.height},{flexDirection:\"column\",flex:1},this.props.globalPropData.style]})}}]),t}(f),Z=function(e){function t(e){var o=this;if(_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),\"constructor\",this).call(this,e),this._onBackPress=function(){return!!o.props.article.globalPropData.backToHome&&(o.workingUri===o.tools.getCurrentUri()&&(y.openUri(o.props.navigator,o.props.instance,\"https://home.mi.com/shop/main\"),!0))},this.getViewHeight=function(){var e=m.ViewHeight-m.statusBarHeight;return R.isIPhoneX&&R.isIPhoneX()&&(e-=80),o.showTitleBar&&(e-=m.titleBar.height),e},this.widgetUid=0,this.eventEmitter=new D,this.tools={getCurrentUri:function(){if(\"web\"===l.OS)return\"\";var e=o.props.navigator.getCurrentRoutes();return e[e.length-1].uri},registerScrollListener:function(e){o.state.scrollListeners.push(e)},countEvent:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?\"\":arguments[2];try{b&&b.touch(e,o.tools.getTrace(t)+r)}catch(e){console.log(e)}},showFloatingLayer:function(e){var t=e.id,r=e.onClose,i=e.closeOnTapWrap,a=void 0===i||i,s=e.closeOnTapShadow,l=void 0===s||s,p=e.gap,h=void 0===p?80:p,u=o.streamRags.ragIDMap[t]&&o.streamRags.ragIDMap[t].rag;u||V(\"浮层不存在：\"+t),u=x(u),u.editorGeneral.style&&delete u.editorGeneral.style.display;var d={position:\"absolute\",left:0,right:0,top:0,bottom:0},f=void 0,v=function(){o.tools.removeRootView(f),r&&r()},y=function(){l&&v()},b=function(){a&&v()};a||l||!function(){var e=function e(t){O(u,t.props.editorUid)&&(o.eventEmitter.off(\"action-click_to_remove\",e),v())};o.eventEmitter.on(\"action-click_to_remove\",e)}(),o.widgetUid++,f=g.createElement(n,{key:o.widgetUid,style:[d,{top:m.statusBarHeight+(o.showTitleBar?m.titleBar.height:0)}]},g.createElement(c,{onPress:y},g.createElement(n,{key:\"shadow\",style:[d,{backgroundColor:\"rgba(0,0,0,0.5)\"}]})),g.createElement(n,{key:\"wrap\",style:[d,{left:h/2,right:h/2,top:h/2,bottom:h/2,flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\"}]},g.createElement(q,{onPress:b,baseWidth:o.getWidth()-h,ModuleMap:o.ModuleMap,rag:u,general:u.editorGeneral,action:u.editorActions,key:u.editorGeneral.editorUid,id:u.editorGeneral.editorUid,inStream:!0}))),o.tools.addRootView(f)},showFloatingLayer2:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.showFloatingLayer(t)},getTrace:function(e){if(!e)return\"\";var t=void 0;e.editorUid?t=e.editorUid:e.props&&(e.props.editorUid?t=e.props.editorUid:e.props.editorGeneral&&e.props.editorGeneral.editorUid&&(t=e.props.editorGeneral.editorUid));var r=o.props.article;return r.meta.traceName+\"-\"+r.meta.id+\"-\"+t},getTracedUrl:function(e){var t=e.url,r=e.rag,i=e.traceAppend,n=void 0===i?[]:i,a=e.extraParams,s=void 0===a?{}:a,l=e.uid,c=void 0===l||l;t.match(/^\\/\\//)&&(t=\"https:\"+t),\"string\"!=typeof n&&\"number\"!=typeof n||(n=[n]),n=n.map(function(e){return\"-\"+e}).join(\"\");var p=E(t,\"source\");!p&&o.state.source&&(t=T(t,\"source\",o.state.source)),r&&(t=T(t,\"trace\",o.tools.getTrace(r)+n)),c&&(t=T(t,\"traceUid\",_()));for(var h in s)t=T(t,h,s[h]);return t},jumpTo:function(e){var t=e.url,r=e.replace,i=void 0!==r&&r,n=e.rag,a=e.traceAppend,s=e.extraParams;if(t){if(t.match(/^#/))return void o.scrollToRag(t.trim().slice(1),!0);t=o.tools.getTracedUrl({url:t,rag:n,traceAppend:a,extraParams:s,uid:!1}),i?y.finishAndOpenUri(o.props.navigator,t):y.openUri(o.props.navigator,o.props.instance,t)}},addRootView:function(e){var t=o.state.rootViews.slice();t.push(e),o.preventStreamViewRender=!0,o.setState({rootViews:t}),setTimeout(function(){o.preventStreamViewRender=!1})},removeRootView:function(e){var t=o.state.rootViews.indexOf(e);if(t!==-1){var r=o.state.rootViews.slice();r.splice(t,1),o.preventStreamViewRender=!0,o.setState({rootViews:r}),setTimeout(function(){o.preventStreamViewRender=!1})}},confirm:function(e){return new Promise(function(t,r){console.log(\"content\",e);var i=g.createElement(M,{content:e,onPress:function(e){console.log(\"result12\",e),o.tools.removeRootView(i),t(e)}});o.tools.addRootView(i)})},setNavBarBackUri:function(e){o.navBarBackUri=e},setDataLoadState:function(e){o.props.parent&&o.props.parent.setState({dataLoadState:e})},pageDataError:function(){o.props.parent.setState({dataLoadState:-1})}},this.args=e.parent.props,\"web\"!==l.OS){var i=e.parent.props.navigator.getCurrentRoutes();this.selfUri=(i[i.length-1]||{}).uri}else this.selfUri=location.href;e.parent.props.debug&&(console.log(\"allModuleMap\",allModuleMap,e),console.log(\"props\",e)),this.ragMap={},this.floating={},this.ModuleMap={},this.floatingRags={},this.firstPageInFlag=!0,this.prefetchResult={};var a=[\"renderShareContent\",\"onBackPress\",\"onSharePress\",\"onPressedShare\",\"onScroll\",\"onRefresh\"];a.forEach(function(e){o[e]=o[e].bind(o)}),this.onBackPress=this.onBackPress.bind(this);var s=e.newFuncResult,p=s.modulesMap,h=s.actionsMap,u=s.tagsMap,d=s.libsMap;Object.assign(this.ModuleMap,p,this.props.ModuleMap),this.TagMap=u;for(var f in h)L[f]=!0;var v=d.util,w=v.clone(e.article);v.handleArticle(w),q=d.RagWrap,h||(console.log(h),console.warn(\"no callback invoked in the new function\"));var k=!0;if(!r(w,this.ModuleMap)){if(!e.uri)return;var U=v.getParam(e.uri,\"force-test-rn\");console.warn(\"!!!force-test-rn'\",U),console.log(\"!!!force-test-rn'\",U),\"1\"!==U&&(y.finishAndOpenUri(this.props.navigator,P.replace(\"?rn=1&\",\"?\").replace(\"?rn=1\",\"\").replace(\"&rn=1\",\"\")),k=!1)}var B=[],F=[],I={};w.rags=this.ragsConditionFilter(w.rags),C(w.rags,function(e){e.rags&&(e.rags=o.ragsConditionFilter(e.rags));for(var t in e.editorActions)switch(I[t]=!0,t){case\"footer\":var r=x(e);B.push(r);break;case\"header\":var r=x(e);F.push(r)}e.links&&e.links.forEach(function(e){if(e.action)for(var t in e.action)I[t]=!0})}),S.init(I,h),setTimeout(function(){S.didMount()}),j.ref=this;for(var f in this)j[f]=this[f];if(this.state=_extends({},w,{headerRags:F,footerRags:B,doRender:k,source:E(this.props.uri,\"source\"),isRefreshing:!1,scrollListeners:[],rootViews:[]}),\"undefined\"!=typeof Zepto){var G=window.Zepto;G(\"#editor-rnrender-style\").length||G(\"body\").append('<style id=\"editor-rnrender-style\">\\n                [pointer-events=\"box-none\"]{\\n                    pointer-events:none;\\n                }\\n                [pointer-events=\"none\"]{\\n                    pointer-events:none;\\n                }\\n                </style>\\n                ')}if(this.showTitleBar=\"web\"!==l.OS,!this.showTitleBar&&\"web\"===l.OS)try{window.document.title=e.article.globalPropData.topBarTitle||\"有品\"}catch(e){}}return _inherits(t,e),_createClass(t,[{key:\"registerRag\",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.ModuleMap:arguments[1],r=t[e.editorName].prefetch;r&&(this.prefetchResult[e.editorGeneral.editorUid]=r(e))}},{key:\"componentWillMount\",value:function(){C(this.props.article.rags,this.registerRag.bind(this))}},{key:\"componentWillUnmount\",value:function(){this.props.article.globalPropData.backToHome&&h.popEventListener(this._onBackPress)}},{key:\"componentDidMount\",value:function(){var e=this;this.state.doRender||(console.log(\"finishAndOpenUri\"),y.finishAndOpenUri(this.props.navigator,this.props.uri.replace(\"?rn=1&\",\"?\").replace(\"?rn=1\",\"\").replace(\"&rn=1\",\"\"))),this.props.article.globalPropData.backToHome&&(this.workingUri=this.tools.getCurrentUri(),this.tools.setNavBarBackUri(\"https://home.mi.com/shop/main\"),h.pushEventListener(this._onBackPress)),this.props.parent.onPageIn=function(){return e.firstPageInFlag?void(e.firstPageInFlag=!1):void e.eventEmitter.emit(\"page-resume\")}}},{key:\"ragsConditionFilter\",value:function(e){var t=this;return e.filter(function(e){if(!e.editorGeneral||!e.editorGeneral[\"condition-show-3\"])return!0;var r=e.editorGeneral[\"condition-show-3\"],o=void 0;return o=\"显示\"===r.mode,r.key?r.value?t.args[r.key]===r.value?o:!o:t.args[r.key]?o:!o:void 0})}}],[{key:\"propTypes\",value:{newFuncResult:d.object.isRequired,article:d.object.isRequired,instance:g.PropTypes.oneOfType([d.string,d.number]).isRequired,navigator:d.object.isRequired,uri:d.string,onRefresh:d.func,parent:d.object,ModuleMap:d.object,embed:d.bool},enumerable:!0},{key:\"defaultProps\",value:{uri:\"\",ModuleMap:{}},enumerable:!0}]),_createClass(t,[{key:\"_contentView\",value:function(){var e=this;return g.createElement(n,{style:{flex:1,flexDirection:\"column\"}},g.createElement(n,{style:{flex:1,flexDirection:\"column\",position:\"relative\"}},this.getStreamView(),this.getFloatingView(\"header\",this.state.headerRags),this.getFloatingView(\"footer\",this.state.footerRags)),g.createElement(k,{ref:function(t){e.shareViewRef||(e.shareViewRef=t)},visibility:!1,menuInBottom:!0,navigator:this.props.navigator,posOffset:m.titleBar.height+m.statusBarHeight,renderMenu:this.renderShareContent}))}},{key:\"getBaseWidth\",value:function(){var e=m.ViewWidth-(this.state.globalPropData.style.paddingLeft||0)-(this.state.globalPropData.style.paddingRight||0);return e}},{key:\"getFloatingView\",value:function(e,t){var r=this,o={position:\"absolute\",left:0,right:0,flexDirection:\"row\"};return\"footer\"===e?(o.alignItems=\"flex-end\",o.justifyContent=\"flex-start\",o.flexWrap=\"wrap\",o.height=this.getViewHeight(),o.bottom=0):(o.alignItems=\"flex-start\",o.justifyContent=\"flex-start\",o.flexWrap=\"wrap\",o.top=0),g.createElement(n,{ref:function(t){r.floating[e]=t},style:o,pointerEvents:\"box-none\",onLayout:function(t){var o=t.nativeEvent.layout.width;r.floating[e+\"Height\"]=o}},t.map(function(t,o){return r.renderFloatingRag(t,t.editorActions[e].data)}))}},{key:\"getShareUrl\",value:function(){var e=this.state.shareContent,t=encodeURIComponent(e.url||this.selfUri),r=encodeURIComponent(e.title),o=encodeURIComponent(e.content),i=[\"wbTitle\",\"wbContent\",\"pyqTitle\",\"pyqContent\",\"mlTitle\",\"mlContent\"],n=e.pics,a=\"http://home.mi.com/shop/goshare?title=\"+r+\"&content=\"+o+\"&ml=\"+e.ml+\"&wx=\"+e.wx+\"&pyq=\"+e.pyq+\"&wb=\"+e.wb+\"&pics=\"+n+\"&img=\"+e.img+\"&bimg=\"+e.bimg+\"&url=\"+t;return i.forEach(function(t){e[t]&&(a=T(a,t,encodeURIComponent(e[t])))}),a}},{key:\"onRefresh\",value:function(){this.setState({isRefreshing:!0}),this.props.onRefresh()}},{key:\"getWidth\",value:function(){return m.ViewWidth}},{key:\"getStreamView\",value:function(){var e=this;return g.createElement(X,{removeClippedSubviews:!this.props.article.hasInput,canRefresh:!this.state.globalPropData.preventPullRefresh&&!this.props.embed,onRefresh:this.onRefresh,onScroll:this.onScroll,height:this.getViewHeight(),ref:function(t){return e.streamRags=t},ref2:function(t){e.wrap=t,j.wrap=t,e.scrollView=t},ModuleMap:this.ModuleMap,baseWidth:this.getBaseWidth(),globalPropData:this.state.globalPropData.style,rags:this.state.rags,ragMap:this.ragMap,RnRender:this,preventStreamViewRender:this.preventStreamViewRender})}},{key:\"onBackPress\",value:function(){return this.navBarBackUri?(y.openUri(this.props.navigator,this.props.instance,this.navBarBackUri),void(this.navBarBackUri=\"\")):void y.back(this.props.navigator,this.props.instance)}},{key:\"onPressedShare\",value:function(){this.shareViewRef.dismiss()}},{key:\"onScroll\",value:function(e){this.state.scrollListeners.forEach(function(t){t(e.nativeEvent.contentOffset.y)})}},{key:\"renderFloatingRag\",value:function(e,t){var r=t.style;r&&r.trim()&&(r=r.split(\";\"),r.forEach(function(t){if(t){var r=t.split(\":\"),o=_slicedToArray(r,2),i=o[0],n=o[1];e.editorGeneral.style[i]=n}}));var o=e.editorGeneral.style;o.width&&\"string\"==typeof o.width&&o.width.match(/%$/)&&(e.editorGeneral.baseWidth=this.getBaseWidth());var i=this;return g.createElement(q,{ModuleMap:this.ModuleMap,baseWidth:this.getBaseWidth(),rag:e,general:e.editorGeneral,action:e.editorActions,key:e.editorGeneral.editorUid,inStream:!1,ref:function(t){i.floatingRags[e.editorGeneral.editorUid]=t}})}},{key:\"scrollToRag\",value:function(e,t,r){return void 0===t&&(t=!1),void this.streamRags.scrollTo(e,t,r)}},{key:\"renderShareContent\",value:function(){return g.createElement(v,{url:this.getShareUrl(),navigator:this.props.navigator,onPressed:this.onPressedShare})}},{key:\"onSharePress\",value:function(){b&&b.touch(\"share\");try{var e=this.getShareUrl();if(this.sharePage&&this.sharePage(e))return;this.props.parent.props.app.showPopShare({url:e,ext:{}})}catch(e){console.warn(e.message)}}},{key:\"renderFixedToolBox\",value:function(){function e(){r.eventEmitter.emit(\"go-back-top\")}function t(){r.tools.jumpTo({url:\"https://home.mi.com/shop/cart\",rag:{editorUid:\"cart\"}})}var r=this,o=this.state.globalPropData.fixedToolbox&&this.state.globalPropData.fixedToolbox.goBackTop,i=this.state.globalPropData.fixedToolbox&&this.state.globalPropData.fixedToolbox.cart;return g.createElement(n,{style:{position:\"absolute\",right:15,bottom:41,width:41}},o&&g.createElement(p,{activeOpacity:.8,onPress:e},g.createElement(n,null,g.createElement(I,{style:{width:41},source:{uri:\"https://shop.io.mi-img.com/app/shop/img?id=shop_b86a139df30e9abcc5c4e0e4cd55223f.png&w=123&h=123\"}}))),i&&!B.wxminiprogram&&g.createElement(n,{style:{height:11},activeOpacity:.8}),i&&!B.wxminiprogram&&g.createElement(p,{activeOpacity:.8,onPress:t},g.createElement(n,null,g.createElement(I,{style:{width:41},source:{uri:\"https://shop.io.mi-img.com/app/shop/img?id=shop_97fb843427614f830ed3ad4c349e4be7.png&w=123&h=123\"}}))))}},{key:\"render\",value:function(){var e=this;return this.state.doRender?this.props.embed?this._contentView():g.createElement(n,{style:A.container},this.showTitleBar&&g.createElement(w,{title:this.state.globalPropData.topBarTitle||\"有品\",hasShare:Boolean(this.state.shareContent)&&Boolean(this.state.shareContent.title)&&\"web\"!==l.OS,onBackPress:this.onBackPress,onSharePress:this.onSharePress}),this._contentView(),this.renderFixedToolBox(),this.state.rootViews,g.createElement(G,{renderContent:this.renderRiskContent.bind(this),ref:function(t){return e.riskVcodeViewRef=t},maskStyle:{justifyContent:\"center\",paddingLeft:20,paddingRight:20},contentStyle:{borderRadius:3},showCloseButton:!1,enableOutsideDismiss:!1,visible:this.state.VerifyVisible})):null}}]),t}(F);A=i.create({container:{flex:1,flexDirection:\"column\",backgroundColor:\"#FFFFFF\"}}),j.StreamRags=X,t.exports=Z}(require,e),e.exports&&(allModuleMap[\"/rn/RnRender.jsx\"]=e.exports)}();outputLibsMap['util'] = allModuleMap['/rn/util.js'];\noutputModulesMap['pic_link_full_default_empty'] = allModuleMap['/cloud/module/pic_link_full_default_empty/pic_link_full_default_empty.rn.jsx'];\noutputLibsMap['RagWrap'] = allModuleMap['/rn/RagWrap.jsx'];\noutputLibsMap['RnRender'] = allModuleMap['/rn/RnRender.jsx'];\n\"use strict\";rnNewFunctionCallBack({modulesMap:outputModulesMap,actionsMap:outputActionsMap,libsMap:outputLibsMap,tagsMap:outputTagsMap});"
}